type: vertical-stack
cards:
  - type: custom:simple-thermostat
    entity: climate.condizionatore_salone
    header:
      toggle:
        entity: script.aletta_condizionatore_salone
    layout:
      mode:
        names: false
        headings: false
    sensors:
      - entity: sensor.condizionatore_salone
        name: In uso da
  - type: custom:paper-buttons-row
    buttons:
      - icon: hass:cog-outline
        tap_action:
          action: fire-dom-event
          browser_mod:
            service: browser_mod.popup
            data:
              right_button: Chiudi
              content:
                type: custom:vertical-stack-in-card
                cards:
                  - type: entities
                    entities:
                      - type: custom:multiple-entity-row
                        entity: input_boolean.notify_ac_salone
                        icon: mdi:bell-ring
                        toggle: true
                        name: Notifica
                        state_header: OFF/ON
                      - type: custom:multiple-entity-row
                        entity: input_boolean.presence_ac_salone
                        icon: mdi:power
                        toggle: true
                        name: Abilitazione
                        state_header: PERSON
                        entities:
                          - entity: input_boolean.check_window_ac_salone
                            name: FINESTRA
                            toggle: true
                          - entity: >-
                              automation.controllo_contenitore_scarico_acqua_acqua_salone
                            name: ACQUA
                            toggle: true
                      - type: divider
                      - type: custom:multiple-entity-row
                        entity: input_number.delay_auto_off_ac_salone
                        icon: hass:cog-outline
                        name: Impostazioni
                        state_header: RITARDO OFF
                        entities:
                          - entity: input_number.delay_auto_on_ac_salone
                            name: RITARDO ON
                      - type: custom:multiple-entity-row
                        entity: automation.accensione_automatica_ac_salone
                        toggle: true
                        icon: mdi:air-conditioner
                        name: Accensione auto
                        state_header: AUTO ON
                        entities:
                          - entity: input_datetime.auto_on_ac_salone
                            name: ORARIO
                      - type: custom:multiple-entity-row
                        entity: automation.spegnimento_automatico_ac_salone
                        toggle: true
                        icon: mdi:air-conditioner
                        name: Spegnimento auto
                        state_header: AUTO OFF
                        entities:
                          - entity: input_datetime.auto_off_ac_salone
                            name: ORARIO
                      - type: divider
                      - entity: input_select.season_of_use_ac_salone
                      - type: custom:multiple-entity-row
                        entity: input_select.hvac_modes_ac_salone
                        icon: hass:cog-outline
                        name: Imposta clima
                        state_header: MODE
                        entities:
                          - entity: input_number.set_temperature_ac_salone
                            name: SET
                          - entity: input_select.fan_modes_ac_salone
                            name: FAN
                  - type: vertical-stack
                    cards:
                      - type: conditional
                        conditions:
                          - entity: input_select.season_of_use_ac_salone
                            state: Estate Indice di thom
                        card:
                          type: entities
                          entities:
                            - type: custom:multiple-entity-row
                              entity: input_number.temperature_auto_on_thom_ac_salone
                              icon: mdi:weather-sunny
                              name: Estate Indice di thom
                              state_header: AUTO ON
                              entities:
                                - entity: sensor.thom_ac_salone
                                  name: ATTUALE
                                - entity: >-
                                    input_number.temperature_auto_off_thom_ac_salone
                                  name: AUTO OFF
                            - style:
                                background: '#62717b'
                                height: 1px
                                margin-left: auto
                                margin-right: auto
                              type: divider
                            - type: custom:multiple-entity-row
                              entity: automation.avviso_temperatura_esterna_salone
                              icon: mdi:weather-sunny
                              name: Avviso Temp Esterna
                              toggle: true
                              state_header: OFF/ON
                              entities:
                                - entity: input_datetime.temp_ext_on_salone
                                  name: 'ON'
                                - entity: input_datetime.temp_ext_off_salone
                                  name: 'OFF'
                            - type: custom:multiple-entity-row
                              entity: input_number.offset_thom_ext_salone
                              icon: mdi:weather-sunny
                              name: Avviso Temp Esterna
                              state_header: DIFFERENZA
                              entities:
                                - entity: sensor.thom_esterno
                                  name: NOW
                      - type: conditional
                        conditions:
                          - entity: input_select.season_of_use_ac_salone
                            state: Estate Gradi Celsius
                        card:
                          type: entities
                          entities:
                            - type: custom:multiple-entity-row
                              entity: >-
                                input_number.temperature_auto_on_summer_ac_salone
                              icon: mdi:weather-sunny
                              name: Estate Gradi Celsius
                              state_header: AUTO ON
                              entities:
                                - type: attribute
                                  attribute: current_temperature
                                  entity: climate.condizionatore_salone
                                  name: ATTUALE
                                  unit: °
                                - entity: >-
                                    input_number.temperature_auto_off_summer_ac_salone
                                  name: AUTO OFF
                            - type: custom:multiple-entity-row
                              entity: input_number.humidity_auto_on_summer_ac_salone
                              icon: mdi:weather-sunny
                              name: Estate Umidità
                              state_header: AUTO ON
                              entities:
                                - entity: sensor.weather_humidity
                                  name: ATTUALE
                                  unit: °
                                - entity: >-
                                    input_number.humidity_auto_off_summer_ac_salone
                                  name: AUTO OFF
                            - style:
                                background: '#62717b'
                                height: 1px
                                margin-left: auto
                                margin-right: auto
                              type: divider
                            - type: custom:multiple-entity-row
                              entity: automation.avviso_temperatura_esterna_salone
                              icon: mdi:weather-sunny
                              name: Avviso Temp Esterna
                              toggle: true
                              state_header: OFF/ON
                              entities:
                                - entity: input_datetime.temp_ext_on_salone
                                  name: 'ON'
                                - entity: input_datetime.temp_ext_off_salone
                                  name: 'OFF'
                            - type: custom:multiple-entity-row
                              entity: input_number.offset_temp_ext_estate_salone
                              icon: mdi:weather-sunny
                              name: Avviso Temp Esterna
                              state_header: DIFFERENZA
                              entities:
                                - entity: sensor.weather_temperature
                                  name: NOW
                      - type: conditional
                        conditions:
                          - entity: input_select.season_of_use_ac_salone
                            state: Inverno
                        card:
                          type: entities
                          entities:
                            - type: custom:multiple-entity-row
                              entity: >-
                                input_number.temperature_auto_on_winter_ac_salone
                              icon: mdi:snowflake
                              name: Inverno
                              state_header: AUTO ON
                              entities:
                                - entity: sensor.thom_ac_salone
                                  name: ATTUALE
                                  unit: DI
                                - entity: >-
                                    input_number.temperature_auto_off_winter_ac_salone
                                  name: AUTO OFF
                            - style:
                                background: '#62717b'
                                height: 1px
                                margin-left: auto
                                margin-right: auto
                              type: divider
                            - type: custom:multiple-entity-row
                              entity: automation.avviso_temperatura_esterna_salone
                              icon: mdi:weather-sunny
                              name: Avviso Temp Esterna
                              toggle: true
                              state_header: OFF/ON
                              entities:
                                - entity: input_datetime.temp_ext_on_salone
                                  name: 'ON'
                                - entity: input_datetime.temp_ext_off_salone
                                  name: 'OFF'
                            - type: custom:multiple-entity-row
                              entity: >-
                                input_number.offset_temperatura_ext_inverno_salone
                              icon: mdi:weather-sunny
                              name: Avviso Temp Esterna
                              state_header: DIFFERENZA
                              entities:
                                - entity: sensor.weather_temperature
                                  name: NOW
                      - type: conditional
                        conditions:
                          - entity: input_select.season_of_use_ac_salone
                            state: Umidità
                        card:
                          type: entities
                          entities:
                            - type: custom:multiple-entity-row
                              entity: input_number.humidity_auto_on_ac_salone
                              icon: mdi:weather-sunny
                              name: Umidità
                              state_header: AUTO ON
                              entities:
                                - type: attribute
                                  attribute: current_humidity
                                  entity: climate.condizionatore_salone
                                  name: ATTUALE
                                  unit: °
                                - entity: input_number.humidity_auto_off_ac_salone
                                  name: AUTO OFF
                            - style:
                                background: '#62717b'
                                height: 1px
                                margin-left: auto
                                margin-right: auto
                              type: divider
                            - type: custom:multiple-entity-row
                              entity: automation.avviso_temperatura_esterna_salone
                              icon: mdi:weather-sunny
                              name: Avviso Temp Esterna
                              toggle: true
                              state_header: OFF/ON
                              entities:
                                - entity: input_datetime.temp_ext_on_salone
                                  name: 'ON'
                                - entity: input_datetime.temp_ext_off_salone
                                  name: 'OFF'
                            - type: custom:multiple-entity-row
                              entity: input_number.offset_humidity_ext_salone
                              icon: mdi:weather-sunny
                              name: Avviso Temp Esterna
                              state_header: DIFFERENZA
                              entities:
                                - entity: sensor.weather_humidity
                                  name: NOW
      - icon: hass:chart-line
        tap_action:
          action: fire-dom-event
          browser_mod:
            service: browser_mod.popup
            data:
              title: Statistiche
              right_button: Chiudi
              content:
                type: entities
                show_header_toggle: false
                entities:
                  - style:
                      background: '#62717b'
                      height: 1px
                      margin-left: auto
                      margin-right: auto
                    type: divider
                  - type: custom:multiple-entity-row
                    entity: sensor.condizionatore_salone
                    attribute: costo_consumo_giornaliero_condizionatore_sala
                    name: OGGI
                    state_header: EURO
                    state_color: true
                    entities:
                      - type: attribute
                        attribute: Oggi
                        entity: sensor.condizionatore_salone
                        name: TEMPO
                      - entity: sensor.condizionatore_salone_consumo_giornaliero
                        name: CONSUMO
                  - style:
                      background: '#62717b'
                      height: 1px
                      margin-left: auto
                      margin-right: auto
                    type: divider
                  - type: custom:multiple-entity-row
                    entity: sensor.condizionatore_salone
                    attribute: costo_consumo_ieri_condizionatore_sala
                    name: IERI
                    state_header: EURO
                    state_color: true
                    entities:
                      - type: attribute
                        attribute: Ieri
                        entity: sensor.condizionatore_salone
                        name: TEMPO
                      - type: attribute
                        attribute: last_period
                        entity: sensor.condizionatore_salone_consumo_giornaliero
                        name: CONSUMO
                        unit: kWh
                  - style:
                      background: '#62717b'
                      height: 1px
                      margin-left: auto
                      margin-right: auto
                    type: divider
                  - entity: sensor.condizionatore_salone
                    type: custom:multiple-entity-row
                    attribute: costo_consumo_mensile_condizionatore_sala
                    name: MENSILE
                    state_header: EURO
                    state_color: true
                    entities:
                      - type: attribute
                        attribute: Mese
                        entity: sensor.condizionatore_salone
                        name: TEMPO
                      - entity: sensor.condizionatore_salone_consumo_mensile
                        name: CONSUMO
                  - style:
                      background: '#62717b'
                      height: 1px
                      margin-left: auto
                      margin-right: auto
                    type: divider
                  - type: custom:multiple-entity-row
                    entity: sensor.condizionatore_salone
                    attribute: costo_consumo_annuale_condizionatore_sala
                    name: ANNUALE
                    state_header: EURO
                    state_color: true
                    entities:
                      - type: attribute
                        attribute: Anno
                        entity: sensor.condizionatore_salone
                        name: TEMPO
                      - entity: sensor.condizionatore_salone_consumo_annuale
                        name: CONSUMO
                  - style:
                      background: '#62717b'
                      height: 1px
                      margin-left: auto
                      margin-right: auto
                    type: divider
                  - type: button
                    action_name: RESET
                    name: Reset Contatori
                    icon: mdi:restart
                    tap_action:
                      action: call-service
                      service: utility_meter.calibrate
                      service_data:
                        value: '0'
                      target:
                        entity_id:
                          - sensor.condizionatore_salone_tempo_anno
                          - sensor.condizionatore_salone_tempo_mese
                          - sensor.tempo_oggi_condizionatore_sala
                          - sensor.condizionatore_salone_consumo_giornaliero
                          - sensor.condizionatore_salone_consumo_mensile
                          - sensor.condizionatore_salone_consumo_annuale
                  - style:
                      background: '#62717b'
                      height: 1px
                      margin-left: auto
                      margin-right: auto
                    type: divider
