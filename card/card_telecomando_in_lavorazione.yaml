type: custom:button-card
variables:
  climate: climate.condizionatore_salone
  name: ac_salone
triggers_update: all
styles:
  card:
    - background-color: rgba(0,0,0,0.0)
    - border-width: 0px
    - height: 470px
    - width: 330px
    - padding: 0px
    - border-radius: 0px
  custom_fields:
    background:
      - position: absolute
      - left: 66px
      - top: '-0px'
    plus:
      - position: absolute
      - left: 210px
      - top: 290px
    less:
      - position: absolute
      - left: 70px
      - top: 290px
    power:
      - position: absolute
      - left: 140px
      - top: 290px
    setting:
      - position: absolute
      - left: 175px
      - top: 350px
    fan:
      - position: absolute
      - left: 105px
      - top: 230px
    statistic:
      - position: absolute
      - left: 105px
      - top: 350px
    mode:
      - position: absolute
      - left: 175px
      - top: 230px
    display:
      - position: absolute
      - left: 111px
      - top: 38px
custom_fields:
  display:
    card:
      type: custom:button-card
      tap_action:
        action: none
      styles:
        card:
          - background-color: rgba(0,0,0,0.0)
          - border-width: 0px
          - height: 163px
          - width: 138px
          - padding: 0px
          - border-radius: 0px
        name:
          - color: rgba(49, 46, 42, 1)
          - font-size: 320%
        custom_fields:
          set_temp:
            - position: absolute
            - left: 35px
            - top: 20px
          cur_temp:
            - position: absolute
            - left: 1px
            - top: 115px
          auto:
            - position: absolute
            - left: 73px
            - top: 115px
          mode:
            - position: absolute
            - top: 80px
          fan:
            - position: absolute
            - top: 53px
            - left: 101px
          time:
            - position: absolute
            - top: 0px
            - left: 4px
      custom_fields:
        time:
          card:
            type: custom:button-card
            template: info_display
            styles:
              card:
                - width: 138px
              name:
                - justify-self: center
            name: |
              [[[
                if (states[variables.climate].state == 'off') return 'Spento ';
                else return 'Acceso: ' + states["sensor."+variables.name].state;
              ]]]
        fan:
          card:
            type: custom:button-card
            template: info_display
            name: '[[[ return states[variables.climate].attributes.fan_mode]]]'
        mode:
          card:
            type: custom:button-card
            styles:
              card:
                - background-color: rgba(0,0,0,0.0)
                - border-width: 0px
                - border-radius: 0px
                - height: 35px
                - width: 137px
              custom_fields:
                heat:
                  - position: absolute
                cool:
                  - position: absolute
                  - left: 34px
                dry:
                  - position: absolute
                  - left: 68px
                fan_only:
                  - position: absolute
                  - left: 102px
            custom_fields:
              fan_only:
                card:
                  type: custom:button-card
                  template: mode_display
                  icon: |
                    [[[
                      if (states[variables.climate].attributes.last_on_operation == 'fan_only')
                        return "mdi:fan";
                    ]]]
              dry:
                card:
                  type: custom:button-card
                  template: mode_display
                  icon: |
                    [[[
                      if (states[variables.climate].attributes.last_on_operation == 'dry')
                        return "mdi:water-percent";
                    ]]]
              cool:
                card:
                  type: custom:button-card
                  template: mode_display
                  icon: |
                    [[[
                      if (states[variables.climate].attributes.last_on_operation == 'cool')
                        return "mdi:snowflake";
                    ]]]
              heat:
                card:
                  type: custom:button-card
                  template: mode_display
                  icon: |
                    [[[
                      if (states[variables.climate].attributes.last_on_operation == 'heat')
                        return "mdi:fire";
                    ]]]
        auto:
          card:
            type: custom:button-card
            name: >-
              [[[ return "AutoOn:
              "+states['automation.accensione_automatica_'+variables.name].state]]]
            label: >-
              [[[ return "AutoOff:
              "+states['automation.spegnimento_automatico_'+variables.name].state]]]
            template: info_display
        cur_temp:
          card:
            type: custom:button-card
            name: >-
              [[[ return
              states[variables.climate].attributes.current_temperature + "°" ]]]
            label: >-
              [[[ return states[variables.climate].attributes.current_humidity +
              "%" ]]]
            icon: mdi:home-export-outline
            template: info_display
            styles:
              grid:
                - grid-template-areas: '"i n " "i l"'
                - grid-template-columns: 1fr 2fr
        set_temp:
          card:
            type: custom:button-card
            name: >-
              [[[ return states[variables.climate].attributes.temperature + "°"
              ]]]
            styles:
              card:
                - border-width: 0px
                - background-color: rgba(0,0,0,0.0)
              name:
                - color: rgba(49, 46, 42, 1)
                - font-size: 320%
  mode:
    card:
      type: custom:button-card
      icon: mdi:air-filter
      template: button_climate
      tap_action:
        action: call-service
        service: climate.set_hvac_mode
        service_data:
          entity_id: '[[[ return variables.climate ]]]'
          hvac_mode: |
            [[[
              if (states[variables.climate].attributes.last_on_operation == 'cool') return 'dry';
              if (states[variables.climate].attributes.last_on_operation == 'dry') return 'fan_only';
              if (states[variables.climate].attributes.last_on_operation == 'fan_only') return 'heat';
              else return 'cool';
            ]]]      
  statistic:
    card:
      type: custom:button-card
      icon: mdi:chart-bell-curve
      template: button_climate
  fan:
    card:
      type: custom:button-card
      icon: mdi:fan
      template: button_climate
      tap_action:
        action: call-service
        service: climate.set_fan_mode
        service_data:
          entity_id: '[[[ return variables.climate ]]]'
          fan_mode: |
            [[[
              if (states[variables.climate].attributes.fan_mode == 'low') return 'mid';
              if (states[variables.climate].attributes.fan_mode == 'mid') return 'high';
              if (states[variables.climate].attributes.fan_mode == 'high') return 'auto';
              else return 'low';
            ]]]      
  setting:
    card:
      type: custom:button-card
      icon: mdi:cog-outline
      template: button_climate
  power:
    card:
      type: custom:button-card
      icon: mdi:power
      template: button_climate
      styles:
        icon:
          - color: |
              [[[
                if (states[variables.climate].state == 'off') return 'rgba(120, 120, 120, 1)';
                else return 'rgba(107, 179, 214, 1)';
              ]]]
      tap_action:
        action: call-service
        service: |
          [[[
            if (states[variables.climate].state == 'off') return 'climate.turn_on';
            else return 'climate.turn_off';
          ]]]
        service_data:
          entity_id: '[[[ return variables.climate ]]]'
  plus:
    card:
      type: custom:button-card
      icon: mdi:plus-thick
      template: button_climate
      tap_action:
        action: call-service
        service: climate.set_temperature
        service_data:
          entity_id: '[[[ return variables.climate ]]]'
          temperature: |
            [[[ return states[variables.climate].attributes.temperature + 1; ]]]
  less:
    card:
      type: custom:button-card
      icon: mdi:minus-thick
      template: button_climate
      tap_action:
        action: call-service
        service: climate.set_temperature
        service_data:
          entity_id: '[[[ return variables.climate ]]]'
          temperature: |
            [[[ return states[variables.climate].attributes.temperature - 1; ]]]
  background: >
    <svg width="229" height="466" viewBox="0 0 229 466" fill="none"
    xmlns="http://www.w3.org/2000/svg"> <g filter="url(#filter0_d_23_8)"> <path
    d="M17.9998 426V370C2.99998 337.5 -1.99999 295 17.9998 261.5V36C70.4998
    -1.00001 143.5 -15.5 209.5 36V261.5C230 298 228 337 209.5 370V426C174.5
    458.5 68.9998 476 17.9998 426Z" fill="#D9D9D9"/> </g> <path d="M192.5
    24C149.5 -6.5 84.5 -8 37 24V268H192.5V24Z" fill="#3A3A3A"/> <circle cx="114"
    cy="317" r="92.5" fill="#3A3A3A" stroke="#1A1A1A" stroke-width="3"/> <path
    d="M179.195 353.842C179.2 353.842 179.202 353.842 179.202 353.842C179.203
    353.842 179.2 353.842 179.195 353.842ZM47.6653 277.899C47.6654 277.899
    47.6667 277.901 47.6689 277.905C47.6663 277.901 47.6652 277.899 47.6653
    277.899ZM46.7258 279.526C46.7258 279.526 46.7282 279.526 46.7332
    279.526C46.7284 279.526 46.7259 279.526 46.7258 279.526ZM178.263
    355.469C178.263 355.469 178.262 355.467 178.259 355.463C178.262 355.467
    178.263 355.469 178.263 355.469ZM110.214 321.447C128.643 332.087 145.562
    341.338 158.021 347.693C164.246 350.869 169.381 353.333 173.043
    354.888C174.866 355.661 176.371 356.23 177.483 356.543C178.027 356.697
    178.56 356.814 179.023 356.837C179.252 356.849 179.553 356.844 179.864
    356.756C180.182 356.667 180.65 356.448 180.947 355.934C181.244 355.42
    181.199 354.905 181.118 354.585C181.038 354.272 180.892 354.008 180.768
    353.816C180.515 353.426 180.148 353.023 179.743 352.629C178.915 351.823
    177.67 350.804 176.089 349.612C172.912 347.218 168.21 344.003 162.347
    340.2C150.614 332.587 134.143 322.561 115.714 311.921C97.2848 301.281
    80.3663 292.03 67.9072 285.675C61.6823 282.499 56.5473 280.035 52.885
    278.48C51.0625 277.707 49.557 277.138 48.4453 276.824C47.9013 276.671
    47.3686 276.554 46.9051 276.53C46.6764 276.519 46.3751 276.524 46.0639
    276.612C45.7464 276.701 45.2779 276.92 44.9811 277.434C44.6844 277.948
    44.729 278.463 44.8105 278.783C44.8903 279.096 45.0362 279.36 45.1606
    279.552C45.4128 279.941 45.7804 280.344 46.1853 280.739C47.0128 281.545
    48.2581 282.564 49.8393 283.756C53.0165 286.15 57.7184 289.365 63.5808
    293.168C75.3143 300.78 91.7848 310.807 110.214 321.447Z" stroke="#1A1A1A"
    stroke-width="3"/> <path d="M178.979 278.185C178.981 278.181 178.983 278.179
    178.983 278.179C178.983 278.179 178.982 278.181 178.979 278.185ZM47.4457
    354.122C47.4458 354.122 47.4483 354.122 47.4531 354.122C47.448 354.122
    47.4456 354.122 47.4457 354.122ZM48.3852 355.749C48.3851 355.749 48.3862
    355.747 48.3887 355.743C48.3866 355.747 48.3853 355.749 48.3852
    355.749ZM179.922 279.806C179.922 279.806 179.92 279.806 179.915
    279.806C179.92 279.806 179.922 279.806 179.922 279.806ZM116.434
    321.727C134.863 311.087 151.334 301.06 163.067 293.448C168.93 289.645
    173.632 286.43 176.809 284.036C178.39 282.844 179.635 281.825 180.463
    281.019C180.868 280.624 181.235 280.222 181.487 279.832C181.612 279.64
    181.758 279.376 181.838 279.063C181.919 278.743 181.964 278.228 181.667
    277.714C181.37 277.2 180.902 276.981 180.584 276.892C180.273 276.804 179.972
    276.799 179.743 276.81C179.279 276.834 178.747 276.951 178.203
    277.104C177.091 277.418 175.586 277.987 173.763 278.76C170.101 280.315
    164.966 282.779 158.741 285.955C146.282 292.31 129.363 301.561 110.934
    312.201C92.5046 322.841 76.0341 332.868 64.3007 340.48C58.4383 344.283
    53.7364 347.498 50.5591 349.892C48.9779 351.084 47.7326 352.103 46.9051
    352.909C46.5002 353.303 46.1327 353.706 45.8805 354.096C45.7561 354.288
    45.6101 354.552 45.5303 354.865C45.4489 355.185 45.4042 355.7 45.701
    356.214C45.9977 356.728 46.4663 356.947 46.7837 357.036C47.0949 357.124
    47.3962 357.129 47.6249 357.117C48.0885 357.094 48.6212 356.977 49.1652
    356.824C50.2769 356.51 51.7824 355.941 53.6049 355.168C57.2671 353.613
    62.4022 351.149 68.6271 347.973C81.0861 341.618 98.0046 332.367 116.434
    321.727Z" stroke="#1A1A1A" stroke-width="3"/> <path d="M113.939
    241.057C113.94 241.057 113.938 241.059 113.936 241.063C113.938 241.059
    113.939 241.057 113.939 241.057ZM112.061 392.943C112.061 392.943 112.062
    392.941 112.064 392.937C112.062 392.941 112.061 392.943 112.061
    392.943ZM113.939 392.943C113.94 392.943 113.938 392.941 113.936
    392.937C113.938 392.941 113.939 392.943 113.939 392.943ZM112.064
    241.063C112.062 241.059 112.06 241.057 112.061 241.057C112.061 241.057
    112.062 241.059 112.064 241.063ZM113 395.5C113.594 395.5 114.017 395.204
    114.253 394.973C114.485 394.748 114.64 394.489 114.744 394.286C114.956
    393.872 115.121 393.353 115.26 392.805C115.544 391.685 115.804 390.097
    116.046 388.132C116.531 384.183 116.964 378.504 117.326 371.525C118.052
    357.558 118.5 338.28 118.5 317C118.5 295.72 118.052 276.442 117.326
    262.475C116.964 255.496 116.531 249.817 116.046 245.868C115.804 243.903
    115.544 242.315 115.26 241.195C115.121 240.647 114.956 240.128 114.744
    239.714C114.64 239.511 114.485 239.252 114.253 239.027C114.017 238.796
    113.594 238.5 113 238.5C112.406 238.5 111.983 238.796 111.747
    239.027C111.515 239.252 111.36 239.511 111.256 239.714C111.044 240.128
    110.879 240.647 110.74 241.195C110.456 242.315 110.196 243.903 109.954
    245.868C109.469 249.817 109.036 255.496 108.674 262.475C107.948 276.442
    107.5 295.72 107.5 317C107.5 338.28 107.948 357.558 108.674 371.525C109.036
    378.504 109.469 384.183 109.954 388.132C110.196 390.097 110.456 391.685
    110.74 392.805C110.879 393.353 111.044 393.872 111.256 394.286C111.36
    394.489 111.515 394.748 111.747 394.973C111.983 395.204 112.406 395.5 113
    395.5Z" stroke="#1A1A1A" stroke-width="3"/> <circle cx="114.5" cy="316.5"
    r="39" fill="#3A3A3A" stroke="#E3EDEF" stroke-width="9"/> <path d="M184
    44.5H89L86 3.49999C133 -5 165.5 8 184 18.5V44.5Z" fill="#5D5D5D"/> <path
    d="M44 20V44.5L60 47V37V11.5C52.5 14.5 49 16.5 44 20Z" fill="#5D5D5D"/>
    <path d="M44 21.5C94 -8 148 -1 186.5 21.5" stroke="#CBB9B8"
    stroke-linecap="round"/> <g filter="url(#filter1_i_23_8)"> <path d="M44
    38H184V201H44V38Z" fill="#CCE4E6"/> </g> <defs> <filter id="filter0_d_23_8"
    x="0.808655" y="2.59267" width="227.326" height="462.685"
    filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"> <feFlood
    flood-opacity="0" result="BackgroundImageFix"/> <feColorMatrix
    in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    127 0" result="hardAlpha"/> <feOffset dy="4"/> <feGaussianBlur
    stdDeviation="2"/> <feComposite in2="hardAlpha" operator="out"/>
    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    0.25 0"/> <feBlend mode="normal" in2="BackgroundImageFix"
    result="effect1_dropShadow_23_8"/> <feBlend mode="normal" in="SourceGraphic"
    in2="effect1_dropShadow_23_8" result="shape"/> </filter> <filter
    id="filter1_i_23_8" x="44" y="38" width="140" height="167"
    filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"> <feFlood
    flood-opacity="0" result="BackgroundImageFix"/> <feBlend mode="normal"
    in="SourceGraphic" in2="BackgroundImageFix" result="shape"/> <feColorMatrix
    in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    127 0" result="hardAlpha"/> <feOffset dy="4"/> <feGaussianBlur
    stdDeviation="2"/> <feComposite in2="hardAlpha" operator="arithmetic"
    k2="-1" k3="1"/> <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0
    0 0 0 0 0 0 0 0.25 0"/> <feBlend mode="normal" in2="shape"
    result="effect1_innerShadow_23_8"/> </filter> </defs> </svg>
